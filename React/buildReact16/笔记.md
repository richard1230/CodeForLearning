## 实现虚拟DOM


src/index.js
```jsx
import React from 'React'
import ReactDOM from 'react-dom'

let element = (
    <div id='A1'>
      A1
        <div id='B1'>
          B1
            <div id='C1'>C1</div>
            <div id='C2'>C2</div>
        </div>
        <div id='B2'>
          B2
        </div>
    
    </div>
)

console.log(element);

ReactDOM.render(
    element,
    document,getElementById('root')
)
```

src/react.js
```js
function createElement(type,config,...children) {
  delete config.__self;
  delete config.__source;
  return {
    type,
    props:{
      ...config,
      children: children.map(child =>{
        //兼容处理，如果是React元素返回自己，如果是一个字符串的话,返回文本节点
        return typeof child === 'object' ? child:{
          type: ELEMENT_TEXT,
          props:{
            text: child,
            children:[]
          }
        }
      })
    }
  }
}


const React={
  createElement
}

export default React;
```

## 实现初次渲染
![img_8.png](img_8.png)

### constant.js
```js
//表示一个文本元素
export const ELEMENT_TEXT = Symbol.for('ELEMENT_TEXT');
//React应用需要一个根Fiber
export const TAG_ROOT = Symbol.for('TAG_ROOT');
//原生的节点 span div p 函数组件 类组件
export const TAG_HOST = Symbol.for('TAG_HOST');
//文本节点
export const TAG_TEXT = Symbol.for('TAG_TEXT');
//类组件
export const TAG_CLASS = Symbol.for('TAG_CLASS');
//函数组件
export const TAG_FUNCTION_COMPONENT = Symbol.for('TAG_FUNCTION_COMPONENT');
//新增节点
export const PLACEMENT = Symbol.for('PLACEMENT');
//删除节点
export const DELETION = Symbol.for('DELETION');
//更新节点
export const UPDATE = Symbol.for('UPDATE');
```
## effect链
![img_10.png](img_10.png)

![img_11.png](img_11.png)
以上是完成的顺序 <br>

```html
 <div id='A1'>
      A11   
        <div id='B1'>
          B11
            <div id='C1'>C11</div>
            <div id='C2'>C22</div>
        </div>
        <div id='B2'>
          B22
        </div>
    
    </div>
```
A1的儿子: A11,B1,B2  <br>
A11没有儿子;  <br>
B1的儿子: B11,C1,C2  <br>
B2的儿子: B22  <br>
B11没有儿子;  <br>
C1的儿子:C11 <br>
C2的儿子:C22  <br>
C11没有儿子  <br>
C22没有儿子  <br>